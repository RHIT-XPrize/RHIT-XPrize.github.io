<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>AI XPrize Architecture</title>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="./css/reveal.css"/>

<link rel="stylesheet" href="./css/theme/night.css" id="theme"/>


<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = './css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide"><h1 class="title">AI XPrize Architecture</h1><p class="date">Created: 2017-10-29 Sun 17:18</p>
</section>

<section>
<section id="slide-org6318347">
<h2 id="org6318347">Core Requirements</h2>
<ul>
<li>Interfaces with ROS-Indigo.</li>
<li>Easy to slot new components in and out.</li>
<li>Able to add new components using different languages.</li>

</ul>
</section>
</section>
<section>
<section id="slide-orgb78febb">
<h2 id="orgb78febb">ROS</h2>
<ul>
<li>Protocol that allows easy interface between different <code>rosnode</code>'s to
send messages back and forth.</li>
<li>Allows communication across languages.</li>
<li><code>rosjava</code> is the Java interface to ROS.</li>

</ul>
</section>
</section>
<section>
<section id="slide-org1ca9ec9">
<h2 id="org1ca9ec9">UIMA</h2>
<ul>
<li>Pipeline architecture used for information processing.</li>
<li>Notably used (and significantly improved) in the IBM Watson
project.</li>
<li>Primarily written in Java.
<ul>
<li>Support for other languages, such as C++ exist, but appear to be
deprecated.</li>

</ul></li>

</ul>
</section>
<section id="slide-org999a408">
<h3 id="org999a408">Common Analysis System (CAS)</h3>
<ul>
<li>"Universal" datatype used by all components of UIMA.</li>
<li>Holds some base information with various annotations written on top
of it.</li>

</ul>
</section>
<section id="slide-org844a47f">
<h3 id="org844a47f">Annotators Explanation</h3>
<ul>
<li>Central component in UIMA.</li>
<li>Inputs a CAS object, and adds new annotation objects to it.</li>
<li>Defined by XML Descriptor file.</li>
<li>Classes representing annotation types are auto-generated by UIMA.</li>

</ul>
</section>
<section id="slide-orga12bd59">
<h3 id="orga12bd59">Annotators Example</h3>
<div class="org-src-container">

<pre  class="src src-java"><span style="color: #00ced1;">public</span> <span style="color: #00ced1;">class</span> <span style="color: #ff00ff;">MyAnnotator</span> <span style="color: #9b30ff;">{</span>
    <span style="color: #ffa500;">@Override</span>
    <span style="color: #00ced1;">public</span> <span style="color: #ff00ff;">void</span> <span style="color: #228b22;">process</span><span style="color: #20b2aa;">(</span><span style="color: #ff00ff;">JCas</span> <span style="color: #ffff00;">cas</span><span style="color: #20b2aa;">)</span> <span style="color: #00ced1;">throws</span> <span style="color: #ff00ff;">AnalysisEngineProcessException</span> <span style="color: #20b2aa;">{</span>
        <span style="color: #ff00ff;">String</span> <span style="color: #ffff00;">docText</span> = cas.getDocumentText<span style="color: #00ff00;">()</span>;
        <span style="color: #ff00ff;">int</span> <span style="color: #ffff00;">location</span>;
        <span style="color: #00ced1;">if</span> <span style="color: #00ff00;">(</span><span style="color: #ffff00;">(</span>location = docText.indexOf<span style="color: #ffa500;">(</span><span style="color: #d2691e;">"purple"</span><span style="color: #ffa500;">)</span><span style="color: #ffff00;">)</span> != -1<span style="color: #00ff00;">)</span> <span style="color: #00ff00;">{</span>
            <span style="color: #ff00ff;">Color</span> <span style="color: #ffff00;">color</span> = <span style="color: #00ced1;">new</span> <span style="color: #ff00ff;">Color</span><span style="color: #ffff00;">(</span>cas<span style="color: #ffff00;">)</span>;
            color.setBegin<span style="color: #ffff00;">(</span>location<span style="color: #ffff00;">)</span>;
            color.setEnd<span style="color: #ffff00;">(</span>location + <span style="color: #d2691e;">"purple"</span>.length<span style="color: #ffa500;">()</span><span style="color: #ffff00;">)</span>;
            color.setColorName<span style="color: #ffff00;">(</span><span style="color: #d2691e;">"purple"</span><span style="color: #ffff00;">)</span>;
            color.addToIndexes<span style="color: #ffff00;">(</span>cas<span style="color: #ffff00;">)</span>;
        <span style="color: #00ff00;">}</span>
    <span style="color: #20b2aa;">}</span>
<span style="color: #9b30ff;">}</span>
</pre>
</div>
</section>
<section id="slide-org5834151">
<h3 id="org5834151">Aggregate Analysis Engines</h3>
<ul>
<li>Allows for chaining multiple annotators together.</li>
<li>Essentially just an XML Descriptor file that orders other XML
Descriptors.</li>

</ul>
</section>
</section>
<section>
<section id="slide-orgaa61210">
<h2 id="orgaa61210">Universal UIMA</h2>
<ul>
<li>Our design for making UIMA multi-lingual.</li>
<li>Currently implemented using HTTP.</li>
<li>Could be feasible over different protocols in the future.</li>

</ul>
</section>
<section id="slide-org4dbf840">
<h3 id="org4dbf840">HTTP UIMA Protocol Description</h3>
<ul>
<li>Serialize CAS object into JSON using built-in UIMA functions.</li>
<li>Send Multipart HTTP request to an external server with the JSON-CAS
and any necessary binary data.</li>
<li>External annotator (acting as a server) receives the request,
processes it, and returns a list of annotations in JSON.</li>

</ul>
</section>
<section id="slide-orgd4faf41">
<h3 id="orgd4faf41">Returned Annotation JSON</h3>
<div class="org-src-container">

<pre  class="src src-javascript"><span style="color: #9b30ff;">{</span>
    <span style="color: #d2691e;">"my_string_annotation"</span>: <span style="color: #20b2aa;">[</span>
        <span style="color: #00ff00;">{</span>
            <span style="color: #d2691e;">"begin"</span>: 0,
            <span style="color: #d2691e;">"end"</span>: 3,
            <span style="color: #d2691e;">"my_string_field"</span>: <span style="color: #d2691e;">"bar"</span>
        <span style="color: #00ff00;">}</span>,
        <span style="color: #00ff00;">{</span>
            <span style="color: #d2691e;">"begin"</span>: 5,
            <span style="color: #d2691e;">"end"</span>: 10,
            <span style="color: #d2691e;">"my_string_field"</span>: <span style="color: #d2691e;">"foo"</span>
        <span style="color: #00ff00;">}</span>
    <span style="color: #20b2aa;">]</span>,
    <span style="color: #d2691e;">"my_int_annotation"</span>: <span style="color: #20b2aa;">[</span>
        <span style="color: #00ff00;">{</span>
            <span style="color: #d2691e;">"my_int_field"</span>: 5,
            <span style="color: #d2691e;">"my_other_string_field"</span>: <span style="color: #d2691e;">"foobar"</span>
        <span style="color: #00ff00;">}</span>
    <span style="color: #20b2aa;">]</span>
<span style="color: #9b30ff;">}</span>
</pre>
</div>
</section>
<section id="slide-org5dabc50">
<h3 id="org5dabc50">Using the Protocol</h3>
<ul>
<li>Goal to necessitate as little Java code as possible when writing an
external annotator.</li>

</ul>
<div class="org-src-container">

<pre  class="src src-java"><span style="color: #00ced1;">public</span> <span style="color: #00ced1;">class</span> <span style="color: #ff00ff;">ColorsAnnotator</span> <span style="color: #00ced1;">extends</span> <span style="color: #ff00ff;">HttpAnnotator</span> <span style="color: #9b30ff;">{</span>
    <span style="color: #ffa500;">@Override</span>
    <span style="color: #00ced1;">protected</span> <span style="color: #ff00ff;">Class</span><span style="color: #20b2aa;">&lt;</span>? <span style="color: #00ced1;">extends</span> <span style="color: #ff00ff;">Annotation</span><span style="color: #20b2aa;">&gt;</span> <span style="color: #228b22;">getAnnotationClass</span><span style="color: #20b2aa;">(</span><span style="color: #ff00ff;">String</span> <span style="color: #ffff00;">name</span><span style="color: #20b2aa;">)</span>
            <span style="color: #00ced1;">throws</span> <span style="color: #ff00ff;">NoMatchingAnnotationException</span> <span style="color: #20b2aa;">{</span>
        <span style="color: #00ced1;">if</span> <span style="color: #00ff00;">(</span>name.equals<span style="color: #ffff00;">(</span><span style="color: #d2691e;">"Color"</span><span style="color: #ffff00;">)</span><span style="color: #00ff00;">)</span>
            <span style="color: #00ced1;">return</span> Color.<span style="color: #00ced1;">class</span>;
        <span style="color: #00ced1;">throw</span> <span style="color: #00ced1;">new</span> <span style="color: #ffa500;">HttpAnnotator</span>.<span style="color: #ff00ff;">NoMatchingAnnotationException</span><span style="color: #00ff00;">()</span>;
    <span style="color: #20b2aa;">}</span>
<span style="color: #9b30ff;">}</span>
</pre>
</div>
<ul>
<li>If the annotation type only uses primitives, no additional code is
necessary.</li>
<li>Otherwise, the subclass needs only to override a single method to
add custom behavior.</li>

</ul>
<aside class="notes">
<p>
Should probably mention that we don't use a <code>RuntimeException</code> to
emphasize that this <i>must</i> be handled in the superclass.
</p>

</aside>
</section>
<section id="slide-org4cb284c">
<h3 id="org4cb284c">Configuration</h3>
<ul>
<li>External annotators will have their access defined in a global JSON
file, either distributed ahead of time or on some server at a fixed
location.</li>

</ul>
<div class="org-src-container">

<pre  class="src src-javascript"><span style="color: #9b30ff;">{</span>
    <span style="color: #d2691e;">"annotator_name"</span>: <span style="color: #20b2aa;">{</span>
        <span style="color: #d2691e;">"address"</span>: <span style="color: #d2691e;">"123.45.67.89"</span>,
        <span style="color: #d2691e;">"port"</span>: 1234
    <span style="color: #20b2aa;">}</span>,
    <span style="color: #d2691e;">"other_annotator_name"</span>: <span style="color: #20b2aa;">{</span>
        <span style="color: #d2691e;">"address"</span>: <span style="color: #d2691e;">"123.45.67.80"</span>,
        <span style="color: #d2691e;">"port"</span>: 4321
    <span style="color: #20b2aa;">}</span>
<span style="color: #9b30ff;">}</span>
</pre>
</div>
</section>
</section>
<section>
<section id="slide-orgc87b55d">
<h2 id="orgc87b55d">Resulting Architecture Diagram</h2>

<div class="figure">
<p><img src="architecture.png" alt="architecture.png" />
</p>
</div>
</section>
</section>
<section>
<section id="slide-org2cff349">
<h2 id="org2cff349">Demo</h2>
</section>
</section>
<section>
<section id="slide-orgf4391dc">
<h2 id="orgf4391dc">Questions?</h2>
</section>
</section>
</div>
</div>
<script src="./lib/js/head.min.js"></script>
<script src="./js/reveal.js"></script>

<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

controls: true,
progress: true,
history: false,
center: true,
slideNumber: 'c',
rollingLinks: false,
keyboard: true,
overview: true,

theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
transition: Reveal.getQueryHash().transition || 'linear', // default/cube/page/concave/zoom/linear/fade/none
transitionSpeed: 'default',
multiplex: {
    secret: '', // null if client
    id: '', // id, obtained from socket.io server
    url: '' // Location of socket.io server
},

// Optional libraries used to extend on reveal.js
dependencies: [
 { src: './lib/js/classList.js', condition: function() { return !document.body.classList; } },
 { src: './plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: './plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: './plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: './plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }]
});
</script>
</body>
</html>
